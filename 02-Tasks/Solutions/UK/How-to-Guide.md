Видовете задачи са 4:
- Таблица за вземане на решения
- Класове на еквивалентност и гранични стойности
- Граф на управляващия поток
- Ортогонална матрица

### Таблица за вземане на решения - обикновено ще е с 4 условия

**Стъпка 1: Идентифицираме условия и следствия C1..Cn, E1..En**

- Всички условия да не са изпълнени се представя, като всички да са false, няма нужда от отделно условие
- Може да се добави допълнително следствие En+1 за 0(тоест нищо не следва)

Пример:
Индентифицират се следните условия и следствия:
```
С1: Лоялен клиент
С2: Поръчка над 100 лв.
С3: Налична текуща промоция
С4: Клиент с промо код
Е1: Отстъпка 20%
Е2: Отстъпка 15%
Е3: Отстъпка 10%
Е4: Отстъпка 5%
```

**Стъпка 2:**
Условията и следствията се изброяват в таблицата с решения (попълва се първата колона и checksum ред)

| Условия | Стойности |
| :--- | :--- |
| C1 | T, F |
| C2 | T, F |
| C3 | T, F |
| C4 | T, F |
| **Действия** | |
| E1 | 20% |
| E2 | 15% |
| E3 | 10% |
| E4 | 5% |

**Стъпка 3:**
броят комбинации 2^условия (в примера 16)

**Стъпка 4:**
Колоните на таблиците се попълват, като се има предвид, че:
RFk = 2^условия/2^k (с колко True-та почва реда)

В примера
```
RF1 = 16/2 = 8
RF2 = 16 / 4 = 4
RF3 = 16 / 8 = 2
RF4 = 16 / 16 = 1
```

**Стъпка 5:**
Определяме следствията от всяко правило

**Стъпка 6:**
Определя се очаквания резултат от изпълнение на всяко действие ()=> допълваме таблицата за всеки case)

| Условия | Стойности | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12 | 13 | 14 | 15 | 16 |
| :--- | :--- | :-- | :-- | :-- | :-- | :-- | :-- | :-- | :-- | :-- | :-- | :-- | :-- | :-- | :-- | :-- | :-- |
| C1 | T, F | T | T | T | T | T | T | T | T | F | F | F | F | F | F | F | F |
| C2 | T, F | T | T | T | T | F | F | F | F | T | T | T | T | F | F | F | F |
| C3 | T, F | T | T | F | F | T | T | F | F | T | T | F | F | T | T | F | F |
| C4 | T, F | T | F | T | F | T | F | T | F | T | F | T | F | T | F | T | F |
| **Действия** | | | | | | | | | | | | | | | | | |
| E1 | 20% | | T | T | T | | | | | | | | | | | | |
| E2 | 15% | | | | | T | | | | T | T | T | | | | | |
| E3 | 10% | | | | | | T | T | T | | | | T | | | | |
| E4 | 5% | | | | | | | | | | | | | T | T | T | T |
| **Checksum 16** | | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 |

Checksum == колко кейса покрива колоната

**Стъпка 7:** Редуцират се правилата

(Търсим къде съвпадат 3 реда в условията и се получава един и същ резултат, т.е. 4тото условие не е от значение)

В примера:

| Условия | Стойности | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12 | 13 |
| :--- | :--- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- | :- |
| C1 | T, F, N/A | T | T | T | T | T | T | F | F | F | F | F | F | F |
| C2 | T, F, N/A | T | T | T | F | F | F | T | T | T | F | F | F | F |
| C3 | T, F, N/A | T | T | F | T | T | F | T | T | F | T | T | F | F |
| C4 | T, F, N/A | N/A| T | F | N/A| T | F | N/A| T | F | T | F | T | F |
| **Действия** | | | | | | | | | | | | | | |
| E1 | 20% | | T | | T | | | | | | | | | |
| E2 | 15% | | | | | T | | T | | T | | | | |
| E3 | 10% | | | | | | T | | T | | T | | | |
| E4 | 5% | | | | | | | | | T | T | T | T |
| **Checksum 16** | | 2 | 1 | 1 | 2 | 1 | 1 | 2 | 1 | 1 | 1 | 1 | 1 | 1 |

**Стъпка 8:** Генерират се тестови сценарии, съответстващи на правилата в таблицата:
- Резултат TC1: 20%
- Резултат TC2: 5%
(Пoяснение - конкретни са за задачата на примера.)

---

### Класове на еквивалентност и гранични стойности
- Винаги са някакви очевидни от условията разграничения между стойностите, тип м/у `x` и `y` получаваш отстъпка 1, между `y + 1` и `z` отстъпка 2
- В този пример има 2 класа на екв. `Х` до `Y` и `Y+1` до `Z`
- Гранични стойности `-+1/0` около границите на определените класове на еквивалентност, т.е. Ако имаме `х` до `у`, гранични стойности са `х-1`, `x`, `x + 1`, `y-1`, `y`, `y`
- Редуциране на сценариите свързани с граничните стойности - може единствено, когато граничните стойности са винаги върху един и същ компонент на системата (real world пример да си тествам string-a и във всеки unit test да проверявам length != 0)

Примерно решение на задача (какво се записва):
![Клас-на-еквивалентност-Примерно-Решение](/02-Tasks/UK/resources/Клас-на-еквивалентност-Примерно-Решение.png)

### Граф на управляващия поток
- Графът е съставен от:
  - Node за Край
  - Node за Израз
  - Node за Condition
    - Тук се случва разклоняването
    - Всяко разклоняване трябва после да се събере в друг node

## Всевишния guide да си решиш задачите

**Последователност:**
- Асоциираме обработващите възли с изразите за присвояване и извикване на функции
- Асоциираме възлите за вземане на решения с израз за условие if then else
- Създаване на възли за разклонения и асоцииране с изразите за проверки и цикли
- Асоцииране на началния и крайния възел с първи и последен израз

**Въпроси на тази задача:**
- Покритие на върхове - представете си го като line coverage - да се мине през всеки ред
- Покритие на условия - да се мине по всяко ребро, което излиза от if възелът - обикновено има нужда от по-малко тестови сценарии за покритие на изразите, отколкото по условията!!

Примерни решения за ориентир:
![Граф-на-управляващия-поток-Примерно-Решение](/02-Tasks/UK/resources/Граф-на-управляващия-поток-Примерно-Решение.png)

### Ортогонална матрица
Целта е дава матрицата с девет реда

**Стъпка 1:**
Създаване на независимите променливи - фактори

**Стъпка 2:**
Определяне на максималния брой стойности за всички променливи и взимане на макс, ако имам такива с (а - 2, в - 3) - нива

**Стъпка 3:**
Избира се ортогонален масив `L9(3^4)`.

| | **Фактори** | | | |
| :-- | :---: | :---: | :---: | :---: |
| | **1** | **2** | **3** | **4** |
| **1** | 1 | 1 | 1 | 1 |
| **2** | 1 | 2 | 2 | 2 |
| **3** | 1 | 3 | 3 | 3 |
| **4** | 2 | 1 | 2 | 3 |
| **5** | 2 | 2 | 3 | 1 |
| **6** | 2 | 3 | 1 | 2 |
| **7** | 3 | 1 | 3 | 2 |
| **8** | 3 | 2 | 1 | 3 |
| **9** | 3 | 3 | 2 | 1 |

Всяка колона има зависимост, последните две са shift-ване на първи/последен елемент

**Стъпка 4:**
Свързване на променливите с факторите и стойностите с нивата на масива.
Т.е. да кажа, че 1 в първа колона отговаря на ... и т.н.

**Стъпка 5:**
Ако фактор Х има три специфицирани стойности в масива, но съответстващата променлива има 2 възможни стойности. Неасоциирани нива се запълват със стойности на променливата, като се редуват отгоре надолу.

**Стъпка 6: Генерират се тестови сценарии**

| ТС | Категория на клиента | Начин на плащане | Отстъпка | Тип доставка |
| :---: | :--- | :--- | :---: | :--- |
| **1** | Бронзова карта | Наложен платеж | 0% | Офис на куриер |
| **2** | Бронзова карта | Онлайн банкиране| 0% | Адрес |
| **3** | Бронзова карта | Онлайн банкиране| 0% | Адрес |
| **4** | Сребърна карта | Наложен платеж | 5% | Адрес |
| **5** | Сребърна карта | Онлайн банкиране| 5% | Офис на куриер |
| **6** | Сребърна карта | Онлайн банкиране| 5% | Адрес |
| **7** | Златна карта | Наложен платеж | 10% | Адрес |
| **8** | Златна карта | Онлайн банкиране| 10% | Адрес |
| **9** | Златна карта | Онлайн банкиране| 10% | Офис на куриер |

Примерно решение за ориентир (как се записва от-до):
![Ортогонална матрица](/02-Tasks/UK/resources/Ортогонална%20матрица-Примерно-Решение.png)