# Тема 20: Софтуерна архитектура и проектиране

## Софтуерна архитектура
- Дефиниция
    - Софтуерната архитектура е съвкупност от структури, които показват различните софтуерни елементи, техните външно видими свойства и връзките между тях.
    - Тя е абстракция, която разглежда елементите като "черни кутии" и се интересува от техните взаимодействия.
- Структура
    - Съвкупност от софтуерни елементи, техните външно видими свойства (интерфейси) и връзките между тях.
- Изглед (View)
    - Конкретно, документирано представяне на дадена архитектурна структура, полезно за определена група заинтересовани лица (stakeholders).

### Видове структури и изгледи
- Модулни структури
    - Показват функционалните компоненти на системата и техните зависимости. 
    - Елементите са модули, които имат конкретна функционална отговорност.
    - Примерен изглед: Class Diagram, диаграма на пакети.
- Структури на процесите
    - Показват комуникацията и взаимодействието между компонентите по време на работа на системата.
    - Елементите са процеси или обекти, а връзките са комуникационните пътеки.
    - Примерен изглед: Sequence Diagram.
- Структури на разположението
    - Показват разположението на софтуерните елементи върху хардуерни компоненти (сървъри, устройства).
    - Примерен изглед: Deployment Diagram (физически изглед).

## Качествени изисквания
Качествените (нефункционални) изисквания описват как трябва да работи системата.

Те включват характеристики като надеждност, производителност, сигурност, наличност, изменяемост, изпитаемост, коректност и др.

Определят се чрез Сценарии за качество, които описват поведението на системата в дадена ситуация. Всеки сценарий има:
- Източник: Обектът, който генерира въздействието (потребител, друга система).
- Въздействие: Събитие, което системата трябва да обработи (напр. изпращане на заявка).
- Обект: Системата или част от нея, която е засегната.
- Контекст: Условията, при които се случва въздействието (напр. по време на нормална работа).
- Резултат: Действията, които системата предприема.
- Количествени характеристики: Метрики, по които се измерва резултатът (напр. "данните трябва да се получат обратно за максимум 1 секунда").

## Проектиране на софтуерна архитектура
- Проектирането е цикличен (рекурсивен) процес.
- Започва се с основните функционални изисквания (Use Cases) и най-приоритетните качествени изисквания, наречени архитектурни драйвери.
- Процесът води до декомпозиция на системата на по-малки модули и дефиниране на различните архитектурни структури.
- За постигане на качествените изисквания се използват архитектурни тактики.
- Attribute-Driven Design (ADD) е рекурсивен метод, при който качествените изисквания са основен двигател на дизайна.

### Тактики
Тактиката е архитектурно решение, което влияе върху постигането на дадено качествено изискване. Комбинацията от тактики оформя архитектурен стил.
- За наличност (изправност):
    - Откриване на откази: Ping/Echo, Heartbeat, Exceptions.
    - Отстраняване на откази: Активен/пасивен излишък (redundancy), Резерва (spare), Следене на процеси.
    - Възстановяване: Rollback, Shadow mode.
- За производителност:
    - Управление на ресурси: Паралелна обработка, Caching, Load balancing.
    - Управление на заявки: Приоритизиране (Scheduling), Опашки.
- За изменяемост: Локализиране на промените, използване на конфигурационни файлове, Plug-and-play.
- За сигурност: Автентикация, нива на достъп, криптиране, ограничаване на достъпа.
- За изпитаемост: Запис на логове, разделяне на интерфейс от реализация, вградени модули за мониторинг.

## Архитектурни стилове
Архитектурният стил дефинира семейство от системи чрез шаблон за структурна организация.
- Pipe & Filter (Поточна архитектура)
    - Данните преминават през поредица от филтри, които ги обработват.
    - Гъвкав стил, позволява паралелизъм.
- Layered (Слоева архитектура)
    - Компонентите са организирани във вертикални слоеве.
    - Всеки слой комуникира само със слоя под него и предоставя услуги на слоя над него.
- Client-Server
    - Сървъри предлагат услуги, а клиенти ги използват чрез изпращане на заявки.
- Shared Data
    - Всички компоненти комуникират чрез общо хранилище за данни.
        - Repository
            - Компонентите сами следят за промени в данните.
        - Blackboard
            - Компонентите биват уведомявани при промяна в данните.
- MVC (Model-View-Controller)
    - Разделя логиката на данните (Model)
    - потребителския интерфейс (View)
    - обработката на потребителските заявки (Controller).
- Implicit Invocation / Pub-Sub / Event-based
    - Компонентите комуникират асинхронно чрез събития, които се предават по обща шина (event bus).
    - Това води до слабо свързване (loose coupling).
- Други:
    - SOA (Service-Oriented Architecture), Microservices.

## Документиране на софтуерна архитектура

### Предназначение

Документацията служи като "единствена точка на истината" (Single point of knowledge).

Тя улеснява комуникацията между екипите, поддръжката на системата и въвеждането на нови служители.

### Основен принцип
- състои се от описание на различни структури
- структурите могат да се групират по различни начини, в зависимост за кого е предназначена

### Съдържание
Един добър документ за архитектура обикновено включва:
- Общ преглед
    - Високо ниво на представяне на системата.
- Архитектурни изгледи
    - Описание на различните структури (модулна, на процесите и т.н.).
- Изисквания
    - Функционални и качествени изисквания, които са повлияли на дизайна.
- Описание на елементи и връзки
    - Детайлно описание на всеки компонент, неговите интерфейси и поведение.
- Архитектурни решения и тактики
    - Обосновка защо са избрани определени стилове и тактики.
- Възможни промени
    - Описание на потенциални бъдещи вариации.
- Терминологичен речник
    - Дефиниция на използваните термини.
- Допълнителна информация - всичко останало